<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<style>

/* ================= PAGE ================= */
@page {
  size: A4;
  margin: 22mm 14mm 18mm 14mm;
}

body{
  font-family: DejaVu Sans;
  font-size:11px;
  color:#1f2937;
  margin:0;
}

/* ================= CONTAINER ================= */
.container{
  width:100%;
}

/* ================= TOP BRAND BAR ================= */
.brand-bar{
  height:10px;
  background:linear-gradient(90deg,#facc15,#f59e0b,#f97316);
  border-radius:4px;
  margin-bottom:6px;
}

/* ================= HEADER ================= */
.header{
  text-align:center;
  padding:10px 0 12px;
  border-bottom:2px solid #facc15;
}

.header h1{
  margin:0;
  font-size:22px;
  color:#92400e;
  font-weight:900;
  letter-spacing:.8px;
}

.header .sub{
  font-size:10px;
  color:#6b7280;
  margin-top:4px;
}

/* ================= META ================= */
.meta{
  margin:14px 0 10px;
  padding:8px 12px;
  background:#fffbea;
  border:1px solid #fde68a;
  border-radius:6px;
  display:flex;
  justify-content:space-between;
  font-size:10px;
}

/* ================= SECTION TITLE ================= */
h3{
  margin:18px 0 6px;
  font-size:13px;
  color:#92400e;
  border-left:5px solid #facc15;
  padding-left:8px;
  font-weight:900;
}

/* ================= TABLE ================= */
table{
  width:95%;
  border-collapse:collapse;
  margin-top:6px;
  table-layout:fixed;
  page-break-inside:auto;
}

thead{
  display:table-header-group;
}

th,td{
  border:1px solid #e5e7eb;
  padding:6px 7px;
}

th{
  background:linear-gradient(180deg,#facc15,#f59e0b);
  color:#422006;
  font-size:9.5px;
  text-transform:uppercase;
  letter-spacing:.05em;
  text-align:center;
  font-weight:900;
}

tbody tr:nth-child(even){
  background:#fffdf5;
}

/* ================= COLUMN WIDTHS ================= */

/* normal tables */
.col-name1{ width:60%; }
.col-amt1{ width:20%; }
.col-total1{ width:20%; }

/* expense table */
.col-name{ width:40%; }
.col-owner{ width:25%; }
.col-amt{ width:17.5%; }
.col-total{ width:17.5%; }

/* ================= ALIGNMENT ================= */
td:first-child{
  text-align:left;
}

.money{
  text-align:right;
  white-space:nowrap;
}

/* ================= COLORS ================= */
.advance{
  color:#b91c1c;
  font-weight:800;
}

.total{
  color:#065f46;
  font-weight:900;
}

/* ================= GRAND TOTAL ================= */
.grand-box{
  margin-top:22px;
  border:3px solid #facc15;
  background:linear-gradient(180deg,#fffbea,#fde68a);
  padding:16px;
  font-size:17px;
  font-weight:900;
  text-align:right;
  border-radius:10px;
  color:#7c2d12;
  letter-spacing:.5px;
}

/* ================= FOOTER ================= */
.footer{
  margin-top:26px;
  padding-top:8px;
  border-top:2px solid #facc15;
  font-size:9px;
  text-align:right;
  color:#6b7280;
}
/* ================= DROPDOWN LOOK ================= */

.team-row{
  background:linear-gradient(180deg,#fff7ed,#ffedd5);
  font-weight:900;
}

.team-name{
  position:relative;
  padding-left:18px;
}

/* dropdown arrow */
.team-name::before{
  content:"â–¼";
  position:absolute;
  left:4px;
  top:50%;
  transform:translateY(-50%);
  font-size:9px;
  color:#92400e;
}

.site-row td:first-child{
  padding-left:26px;
  color:#374151;
}
/* ================= SECTION GROUP STYLE ================= */

.group-row{
  background:linear-gradient(180deg,#f8fafc,#eef2ff);
  font-weight:900;
}

.group-name{
  position:relative;
  padding-left:18px;
}

.group-name::before{
  content:"â–¼";
  position:absolute;
  left:4px;
  top:50%;
  transform:translateY(-50%);
  font-size:9px;
  color:#1e40af;
}
</style>
</head>

<body>
<div class="container">

<div class="brand-bar"></div>

<!-- HEADER -->
<div class="header">
  <h1>SK BUILDERS</h1>
  <div class="sub">ALL BILLS SUMMARY REPORT</div>
</div>

<!-- META -->
<div class="meta">
  <div><b>From:</b> {{ from_date }}</div>
  <div><b>To:</b> {{ to_date }}</div>
</div>

<!-- ================= CIVIL ================= -->
<h3>Civil Teams</h3>
<table>
<thead>
<tr>
  <th class="col-name1">Team</th>
  <th class="col-amt1">Advance</th>
  <th class="col-total1">Net Total</th>
</tr>
</thead>
<tbody>
{% for team in civil_rows %}

<tr class="team-row">
  <td class="team-name">{{ team.name }}</td>
  <td class="money advance">â‚¹{{ team.advance }}</td>
  <td class="money total">â‚¹{{ team.total }}</td>
</tr>

{% for s in team.sites %}
<tr class="site-row">
  <td>{{ s.site }}</td>
  <td class="money advance">â‚¹{{ s.advance }}</td>
  <td class="money total">â‚¹{{ s.total }}</td>
</tr>
{% endfor %}

{% empty %}
<tr>
  <td colspan="3" style="text-align:center;">No civil data</td>
</tr>
{% endfor %}
</tbody>
</table>

<!-- ================= DEPARTMENT ================= -->
<h3>Departments</h3>
<table>
<thead>
<tr>
  <th class="col-name1">Department</th>
  <th class="col-amt1">Advance</th>
  <th class="col-total1">Net Total</th>
</tr>
</thead>
<tbody>
{% for d in dept_rows %}

<tr class="team-row">
  <td class="team-name">{{ d.name }}</td>
  <td class="money advance">â‚¹{{ d.advance }}</td>
  <td class="money total">â‚¹{{ d.total }}</td>
</tr>

{% for s in d.sites %}
<tr class="site-row">
  <td>{{ s.site }}</td>
  <td class="money advance">â‚¹{{ s.advance }}</td>
  <td class="money total">â‚¹{{ s.total }}</td>
</tr>
{% endfor %}


{% empty %}
<tr>
  <td colspan="3" style="text-align:center;">No department data</td>
</tr>
{% endfor %}
</tbody>
</table>

<!-- ================= MATERIAL ================= -->
<h3>Material / Agents</h3>
<table>
<thead>
<tr>
  <th class="col-name1">Agent</th>
  <th class="col-amt1">Advance</th>
  <th class="col-total1">Net Total</th>
</tr>
</thead>
<tbody>
{% for m in dept_rows %}

<tr class="team-row">
  <td class="team-name">{{ m.name }}</td>
  <td class="money advance">â‚¹{{ m.advance }}</td>
  <td class="money total">â‚¹{{ m.total }}</td>
</tr>

{% for s in m.sites %}
<tr class="site-row">
  <td>{{ s.site }}</td>
  <td class="money advance">â‚¹{{ s.advance }}</td>
  <td class="money total">â‚¹{{ s.total }}</td>
</tr>
{% endfor %}

{% empty %}
<tr>
  <td colspan="3" style="text-align:center;">No material data</td>
</tr>
{% endfor %}
</tbody>
</table>

<!-- ================= OTHER EXPENSE ================= -->
<h3>ðŸ’¸ Other Expenses</h3>
<table>
<thead>
<tr>
  <th class="col-name">Expense</th>
  <th class="col-owner">Owner</th>
  <th class="col-amt">Amount</th>
  <th class="col-total">Net Total</th>
</tr>
</thead>
<tbody>
{% for e in expense_rows %}

<!-- EXPENSE HEADER -->
<tr class="team-row">
  <td class="team-name">{{ e.name }}</td>
  <td></td>
  <td class="money advance">â‚¹{{ e.advance|default:0 }}</td>
  <td class="money total">â‚¹{{ e.total|default:0 }}</td>
</tr>

<!-- SITE ROWS -->
{% for s in e.sites %}
<tr class="site-row">
  <td>{{ s.site }}</td>
  <td>{{ s.owner }}</td>
  <td class="money advance">â‚¹{{ s.advance|default:0 }}</td>
  <td class="money total">â‚¹{{ s.total|default:0 }}</td>
</tr>
{% endfor %}

{% empty %}
<tr>
  <td colspan="4" style="text-align:center;">No expense data</td>
</tr>
{% endfor %}
</tbody>
</table>

<!-- GRAND TOTAL -->
<div class="grand-box">
  GRAND TOTAL : â‚¹{{ grand_total|default:0 }}
</div>

<!-- FOOTER -->
<div class="footer">
  Generated on {{ now|date:"d-m-Y H:i" }}
</div>

</div>
</body>
</html>