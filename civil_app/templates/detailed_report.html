{% extends 'base.html' %}
{% block content %}

<h2 class="text-xl font-bold mb-4">ğŸ“Š Detailed Report</h2>

<!-- FILTER -->
<form method="get" class="flex gap-3 mb-6">
  <input type="date" name="from" value="{{ from|date:'Y-m-d' }}" class="border p-2 rounded">
  <input type="date" name="to" value="{{ to|date:'Y-m-d' }}" class="border p-2 rounded">
  <button class="bg-blue-600 text-white px-4 rounded">Filter</button>
</form>

<!-- ================= TEAM WISE ================= -->
<div class="bg-white shadow rounded-xl mb-6 p-4">
  <h3 class="font-semibold text-blue-700 mb-3">ğŸ‘· Team Wise (Civil)</h3>

  <table class="w-full text-sm">
    <thead class="bg-gray-800 text-white">
      <tr>
        <th class="p-2 text-left">Team</th>
        <th class="p-2 text-right">Labour â‚¹</th>
        <th class="p-2 text-right">Material â‚¹</th>
        <th class="p-2 text-right">Total â‚¹</th>
      </tr>
    </thead>
    <tbody>
      {% for r in team_report %}
      <tr class="border-b">
        <td class="p-2">{{ r.team__name }}</td>
        <td class="p-2 text-right">â‚¹{{ r.labour|default:0 }}</td>
        <td class="p-2 text-right">â‚¹{{ r.material|default:0 }}</td>
        <td class="p-2 text-right font-semibold">â‚¹{{ r.total|default:0 }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="4" class="p-4 text-center text-gray-500">No data</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- ================= DEPARTMENT WISE ================= -->
<div class="bg-white shadow rounded-xl p-4">
  <h3 class="font-semibold text-orange-600 mb-3">ğŸ— Department Wise</h3>

  <table class="w-full text-sm">
    <thead class="bg-gray-800 text-white">
      <tr>
        <th class="p-2 text-left">Department</th>
        <th class="p-2 text-right">Labour â‚¹</th>
        <th class="p-2 text-right">Material â‚¹</th>
        <th class="p-2 text-right">Total â‚¹</th>
      </tr>
    </thead>
    <tbody>
      {% for r in dept_report %}
      <tr class="border-b">
        <td class="p-2">{{ r.department__name }}</td>
        <td class="p-2 text-right">â‚¹{{ r.labour|default:0 }}</td>
        <td class="p-2 text-right">â‚¹{{ r.material|default:0 }}</td>
        <td class="p-2 text-right font-semibold">â‚¹{{ r.total|default:0 }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="4" class="p-4 text-center text-gray-500">No data</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
