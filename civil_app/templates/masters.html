{% extends "base.html" %}
{% block content %}

<div class="max-w-6xl mx-auto space-y-14 animate-page">

  <!-- ================= PAGE HEADER ================= -->
  <div class="space-y-1">
    <h1 class="text-3xl font-extrabold text-slate-900 flex items-center gap-2">
      üß© Masters
    </h1>
    <p class="text-sm text-gray-500">
      Manage departments and civil teams used across the system
    </p>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-10">

    <!-- ================= DEPARTMENT MASTER ================= -->
    <section class="card">

      <h2 class="section-title">
        üè¢ Departments
      </h2>

      <!-- ADD -->
      <div class="form-box">
        <h3 class="form-title">
          ‚ûï Add Department
        </h3>

        <form method="post" class="flex gap-3">
          {% csrf_token %}
          <input type="hidden" name="form_type" value="department">

          <input
            type="text"
            name="name"
            placeholder="Department name"
            required
            class="input flex-1"
          >

          <button class="btn-lemon">
            Add
          </button>
        </form>
      </div>

      <!-- LIST -->
      <div>
        <h3 class="list-title">
          üìã Existing Departments
        </h3>

        {% if departments %}
        <ul class="list-box">
          {% for d in departments %}
          <li class="list-row">
            <span class="font-semibold text-slate-800">
              {{ d.name }}
            </span>

            <form method="post" action="{% url 'delete_department' d.id %}">
              {% csrf_token %}
              <button
                onclick="return confirm('Delete {{ d.name }}?')"
                class="delete-btn">
                üóë Delete
              </button>
            </form>
          </li>
          {% endfor %}
        </ul>
        {% else %}
          <p class="empty">
            No departments added yet
          </p>
        {% endif %}
      </div>

    </section>

    <!-- ================= TEAM MASTER ================= -->
    <section class="card">

      <h2 class="section-title">
        üë∑ Civil Teams
      </h2>

      <!-- ADD -->
      <div class="form-box">
        <h3 class="form-title">
          ‚ûï Add Team
        </h3>

        <form method="post" class="flex gap-3">
          {% csrf_token %}
          <input type="hidden" name="form_type" value="team">

          <input
            type="text"
            name="name"
            placeholder="Team name"
            required
            class="input flex-1"
          >

          <button class="btn-lemon">
            Add
          </button>
        </form>
      </div>

      <!-- LIST -->
      <div>
        <h3 class="list-title">
          üìã Existing Teams
        </h3>

        {% if teams %}
        <ul class="list-box">
          {% for t in teams %}
          <li class="list-row">
            <span class="font-semibold text-slate-800">
              {{ t.name }}
            </span>

            <form method="post" action="{% url 'delete_team' t.id %}">
              {% csrf_token %}
              <button
                onclick="return confirm('Delete {{ t.name }}?')"
                class="delete-btn">
                üóë Delete
              </button>
            </form>
          </li>
          {% endfor %}
        </ul>
        {% else %}
          <p class="empty">
            No teams added yet
          </p>
        {% endif %}
      </div>

    </section>

  </div>
</div>

<!-- ================= STYLES + ANIMATIONS ================= -->
<style>
  /* Page animation */
  .animate-page {
    animation: fadeUp 0.35s ease-out;
  }

  @keyframes fadeUp {
    from { opacity:0; transform: translateY(12px); }
    to   { opacity:1; transform: translateY(0); }
  }

  /* Cards */
  .card {
    background: white;
    border-radius: 1.5rem;
    padding: 1.5rem;
    border: 1px solid #e5e7eb;
    box-shadow: 0 12px 28px rgba(0,0,0,0.06);
    transition: all 0.25s ease;
  }

  .card:hover {
    transform: translateY(-2px);
    box-shadow: 0 20px 40px rgba(0,0,0,0.08);
  }

  .section-title {
    font-size: 1.25rem;
    font-weight: 800;
    color: #0f172a;
    margin-bottom: 1rem;
  }

  /* Forms */
  .form-box {
    background: #f8fafc;
    border-radius: 1rem;
    padding: 1rem;
    border: 1px solid #e5e7eb;
    margin-bottom: 1.5rem;
  }

  .form-title {
    font-size: 0.75rem;
    font-weight: 700;
    color: #6b7280;
    margin-bottom: 0.5rem;
  }

  .input {
    border-radius: 0.75rem;
    padding: 0.6rem 0.75rem;
    font-size: 0.875rem;
    border: 1px solid #e5e7eb;
    transition: all 0.2s ease;
  }

  .input:focus {
    outline: none;
    border-color: #facc15;
    box-shadow: 0 0 0 3px rgba(250,204,21,0.4);
  }

  .btn-lemon {
    background: linear-gradient(to right, #fde047, #facc15);
    color: #422006;
    font-weight: 800;
    border-radius: 0.75rem;
    padding: 0.6rem 1.1rem;
    transition: all 0.25s ease;
  }

  .btn-lemon:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  }

  /* Lists */
  .list-title {
    font-size: 0.75rem;
    font-weight: 700;
    color: #6b7280;
    margin-bottom: 0.5rem;
  }

  .list-box {
    border: 1px solid #e5e7eb;
    border-radius: 1rem;
    overflow: hidden;
  }

  .list-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    transition: background 0.2s ease;
  }

  .list-row:hover {
    background: #fffbe6;
  }

  .delete-btn {
    color: #ef4444;
    font-size: 0.75rem;
    font-weight: 700;
  }

  .delete-btn:hover {
    text-decoration: underline;
  }

  .empty {
    color: #9ca3af;
    font-size: 0.875rem;
  }
</style>

{% endblock %}
