{% extends "base.html" %}
{% block content %}

<div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8">

  <!-- ================= DEPARTMENT MASTER ================= -->
  <div>

    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
      ğŸ¢ Department Master
    </h2>

    <!-- ADD DEPARTMENT -->
    <div class="bg-white rounded-xl shadow p-5 mb-6">
      <h3 class="font-semibold text-gray-700 mb-3">
        â• Add Department
      </h3>

      <form method="post" class="flex gap-2">
        {% csrf_token %}
        <input type="hidden" name="form_type" value="department">

        <input
          type="text"
          name="name"
          placeholder="Department name"
          required
          class="border p-2 flex-1 rounded-lg focus:ring-2 focus:ring-blue-500"
        >

        <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 rounded-lg font-semibold">
          Add
        </button>
      </form>
    </div>

    <!-- DEPARTMENT LIST -->
    <div class="bg-white rounded-xl shadow p-5">
      <h3 class="font-semibold text-gray-700 mb-3">
        ğŸ“‹ Existing Departments
      </h3>

      {% if departments %}
      <ul class="divide-y">
        {% for d in departments %}
        <li class="flex justify-between items-center py-3">
          <span class="font-medium text-gray-800">{{ d.name }}</span>

          <form method="post" action="{% url 'delete_department' d.id %}">
  {% csrf_token %}
  <button
    onclick="return confirm('Delete {{ d.name }}?')"
    class="text-red-600 hover:underline font-semibold">
    ğŸ—‘ Delete
  </button>
</form>

        </li>
        {% endfor %}
      </ul>
      {% else %}
        <p class="text-gray-500 text-sm">No departments added yet</p>
      {% endif %}
    </div>

  </div>

  <!-- ================= TEAM MASTER ================= -->
  <div>

    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
      ğŸ‘· Civil Teams
    </h2>

    <!-- ADD TEAM -->
    <div class="bg-white rounded-xl shadow p-5 mb-6">
      <h3 class="font-semibold text-gray-700 mb-3">
        â• Add Team
      </h3>

      <form method="post" class="flex gap-3">
        {% csrf_token %}
        <input type="hidden" name="form_type" value="team">

        <input
          type="text"
          name="name"
          placeholder="Team name"
          required
          class="flex-1 border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        >

        <button class="bg-blue-600 hover:bg-blue-700 text-white px-6 rounded-lg font-semibold">
          Add
        </button>
      </form>
    </div>

    <!-- TEAM LIST -->
    <div class="bg-white rounded-xl shadow overflow-hidden">
      <div class="px-5 py-3 border-b bg-gray-50">
        <h3 class="font-semibold text-gray-700">
          ğŸ“‹ Existing Teams
        </h3>
      </div>

      {% if teams %}
      <ul class="divide-y">
        {% for t in teams %}
        <li class="flex items-center justify-between px-5 py-4 hover:bg-gray-50 transition">
          <span class="font-medium text-gray-800">
            {{ t.name }}
          </span>

          <form method="post" action="{% url 'delete_team' t.id %}">
  {% csrf_token %}
  <button
    onclick="return confirm('Delete {{ t.name }}?')"
    class="text-red-600 hover:text-red-800 font-semibold">
    ğŸ—‘ Delete
  </button>
</form>

        </li>
        {% endfor %}
      </ul>
      {% else %}
        <div class="p-6 text-center text-gray-500">
          No teams added yet.
        </div>
      {% endif %}
    </div>

  </div>

</div>

{% endblock %}
