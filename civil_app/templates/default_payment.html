{% extends "base.html" %}
{% block content %}

<!-- PAGE TITLE -->
<div class="mb-6">
  <h1 class="text-2xl font-bold flex items-center gap-2">
    ğŸ’° Payment Settings
  </h1>
  
</div>


<!-- ================= DEPARTMENT DEFAULT PAYMENT ================= -->
<div class="bg-white rounded-xl shadow p-5 mb-10">
  <h2 class="text-lg font-bold text-orange-600 mb-4 flex items-center gap-2">
    ğŸ¢ Department Default Payment
  </h2>

  <form method="post" class="grid md:grid-cols-3 gap-3 mb-6">
    {% csrf_token %}
    <input type="hidden" name="pay_type" value="dept">

    <select name="department" class="border p-2 rounded">
      {% for d in departments %}
        <option value="{{ d.id }}">{{ d.name }}</option>
      {% endfor %}
    </select>

    <input type="number" name="full"
           placeholder="Full day payment â‚¹"
           class="border p-2 rounded">

    <button
      class="bg-orange-600 hover:bg-orange-700 text-white rounded font-semibold">
      Save Payment
    </button>
  </form>

  <table class="w-full text-sm border rounded overflow-hidden">
    <thead class="bg-gray-800 text-white">
      <tr>
        <th class="p-2 text-left">Department</th>
        <th class="p-2">Full Day â‚¹</th>
        <th class="p-2">Half Day â‚¹</th>
      </tr>
    </thead>
    <tbody>
      {% for r in rates %}
      <tr class="border-b hover:bg-gray-50">
        <td class="p-2">{{ r.department.name }}</td>
        <td class="p-2 text-center">{{ r.full_day_rate }}</td>
        <td class="p-2 text-center">{{ r.half_day_rate }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- ================= CIVIL TEAM DEFAULT PAYMENT ================= -->
<div class="bg-white rounded-xl shadow p-5">
  <h2 class="text-lg font-bold text-blue-700 mb-4 flex items-center gap-2">
    ğŸ‘· Civil Team Default Payment
  </h2>

  <form method="post" class="grid md:grid-cols-4 gap-3 mb-6">
    {% csrf_token %}
    <input type="hidden" name="pay_type" value="civil">

    <select name="team" class="border p-2 rounded">
      {% for t in teams %}
        <option value="{{ t.id }}">{{ t.name }}</option>
      {% endfor %}
    </select>

    <input type="number" name="mason"
           placeholder="Mason full day â‚¹"
           class="border p-2 rounded">

    <input type="number" name="helper"
           placeholder="Helper full day â‚¹"
           class="border p-2 rounded">

    <button
      class="bg-blue-600 hover:bg-blue-700 text-white rounded font-semibold">
      Save Team Payment
    </button>
  </form>

  <table class="w-full text-sm border rounded overflow-hidden">
    <thead class="bg-gray-800 text-white">
      <tr>
        <th class="p-2 text-left">Team</th>
        <th class="p-2">Mason â‚¹</th>
        <th class="p-2">Helper â‚¹</th>
        <th class="p-2">Status</th>
      </tr>
    </thead>
    <tbody>
  {% for r in team_rates %}
  <tr class="border-b hover:bg-gray-50">
    <td class="p-2">{{ r.team.name }}</td>
    <td class="p-2 text-center">â‚¹ {{ r.mason_full_rate }}</td>
    <td class="p-2 text-center">â‚¹ {{ r.helper_full_rate }}</td>

    <td class="p-2 text-center">
      <form method="post" class="flex gap-2 justify-center">
        {% csrf_token %}
        <input type="hidden" name="pay_type" value="civil">
        <input type="hidden" name="team" value="{{ r.team.id }}">

        <input type="number" name="mason"
               value="{{ r.mason_full_rate }}"
               class="border p-1 w-20 rounded">

        <input type="number" name="helper"
               value="{{ r.helper_full_rate }}"
               class="border p-1 w-20 rounded">

        <button class="bg-green-600 text-white px-3 rounded">
          Update
        </button>
      </form>
    </td>
  </tr>
  {% endfor %}
</tbody>

  </table>
</div>

{% endblock %}
