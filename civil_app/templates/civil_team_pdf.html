<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<style>
/* ================= PAGE ================= */
@page {
  size: A4;
  margin: 14mm 12mm 16mm 12mm;

  @bottom-right {
    content: "Page " counter(page) " of " counter(pages);
    font-size: 8px;
    color: #6b7280;
  }
}

/* ================= BASE ================= */
body{
  font-family: DejaVu Sans, Arial, sans-serif;
  font-size: 10px;
  color:#0f172a;
}

/* ================= CONTAINER ================= */
.page{
  border:1px solid #e5e7eb;
  padding:16px;
  border-radius:6px;
}

/* ================= HEADER ================= */
.header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  border-bottom:3px solid #111827;
  padding-bottom:10px;
  margin-bottom:12px;
}

.brand{
  font-size:20px;
  font-weight:900;
  color:#111827;
}

.subtitle{
  font-size:9px;
  color:#6b7280;
  margin-top:2px;
}

.report-box{
  text-align:right;
}

.report-title{
  font-size:14px;
  font-weight:900;
  color:#111827;
}

.report-date{
  font-size:9px;
  color:#6b7280;
}

/* ================= META ================= */
.meta{
  margin-top:8px;
  padding:7px 10px;
  background:#f8fafc;
  border:1px solid #e5e7eb;
  font-size:9.5px;
  border-radius:4px;
}

/* ================= SUMMARY ================= */
.summary{
  margin-top:12px;
  border:1px solid #fde68a;
  background:linear-gradient(180deg,#fff7ed,#ffffff);
  padding:8px 10px;
  font-size:10px;
  border-radius:4px;
}

.summary .grand{
  color:#065f46;
  font-weight:900;
}

/* ================= TABLE ================= */
table{
  width:95%;
  border-collapse:collapse;
  margin-top:14px;
  table-layout:fixed;
}

thead th{
  background:#111827;
  color:#ffffff;
  font-weight:800;
  font-size:9px;
  text-transform:uppercase;
  padding:7px 5px;
  border:1px solid #000;
}

tbody td{
  border:1px solid #d1d5db;
  padding:6px 5px;
}

tbody tr:nth-child(even){
  background:#f9fafb;
}

tbody tr{
  page-break-inside: avoid;
}

/* ================= ALIGN ================= */
.center{ text-align:center; }
.right{ text-align:right; }

.money{
  font-weight:700;
  white-space:nowrap;
}

/* ================= TOTAL ROW ================= */
.total-row td{
  font-weight:900;
  background:#fef3c7;
  border-top:3px solid #111827;
  font-size:11px;
}

.grand{
  color:#065f46;
  font-weight:900;
}

/* ================= FOOTER ================= */
.footer{
  margin-top:16px;
  font-size:8.5px;
  color:#6b7280;
  display:flex;
  justify-content:space-between;
  border-top:1px solid #e5e7eb;
  padding-top:6px;
}

.site{ font-weight:700; }

</style>
</head>

<body>

<div class="page">

<!-- ================= HEADER ================= -->
<div class="header">

  <div>
    <div class="brand">SK BUILDERS</div>
    <div class="subtitle">Civil Management System</div>
  </div>

  <div class="report-box">
    <div class="report-title">TEAM BILL SUMMARY</div>
    <div class="report-date">
      {{ from_date|date:"d M Y" }} — {{ to_date|date:"d M Y" }}
    </div>
  </div>

</div>

<!-- ================= META ================= -->
<div class="meta">
  <strong>Team:</strong> {{ team.name }}
</div>

<!-- ================= SUMMARY ================= -->
<div class="summary">
  <strong class="grand">
    Team Advance: ₹{{ advance_total }}
    &nbsp;&nbsp;|&nbsp;&nbsp;
    Team Total: ₹{{ grand_total }}
  </strong>
</div>

<!-- ================= TABLE ================= -->
<table>
  <thead>
    <tr>
      <th style="width:60%">Site</th>
      <th style="width:20%">Advance</th>
      <th style="width:20%">Total</th>
    </tr>
  </thead>

  <tbody>
    {% for r in rows %}
    <tr>
      <td class="site">{{ r.site }}</td>
      <td class="right money">₹{{ r.advance }}</td>
      <td class="right money">₹{{ r.total }}</td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="3" class="center" style="padding:18px;color:#9ca3af;">
        No records found
      </td>
    </tr>
    {% endfor %}

    <tr class="total-row">
      <td>TEAM TOTAL</td>
      <td class="right">₹{{ advance_total }}</td>
      <td class="right grand">₹{{ grand_total }}</td>
    </tr>
  </tbody>
</table>

<!-- ================= FOOTER ================= -->
<div class="footer">
  <div>Confidential Financial Report</div>
  <div>Generated on {{ now|date:"d-m-Y H:i" }}</div>
</div>

</div>
</body>
</html>